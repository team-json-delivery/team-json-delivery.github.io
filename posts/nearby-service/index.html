<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>내 근처에는 누가 살고 있을까? : 위치 기반 서비스 설계하기 | Team JSON Delivery</title>
<meta name=keywords content><meta name=description content="오늘은 스터디원 분들과 가상 면접 사례로 배우는 대규모 시스템 설계 기초 2권 의 주변친구 챕터를 스터디를 하며 나눈 내용을 바탕으로 포스팅을 해보려 해요.
면접에서 주변 친구 서비스를 설계해 보라고 하면 어떻게 할까요?
문제를 이해하고 설계 범위를 확정하자 면접 상황에서는 문제를 이해하고 기능의 스펙을 최소화 하는데 집중해야 합니다.
국내 서비스 수준이 아닌 글로벌 서비스 수준의 설계를 원하는지, 주변 친구의 범위가 어느 정도인지, 채팅과 같은 부가기능을 지원해야 되는지에 대해서도 논의해 보면 좋아요. 면접 상황에서는 가급적 핵심 기능에 집중하고 면접관과 이해도를 맞추도록 해요."><meta name=author content="njhyuk"><link rel=canonical href=https://team-json-delivery.github.io/posts/nearby-service/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.bd435680923be95168ea1b839ff6ad8e781ccaf43d48e00fadcb1ff771ce3c90.css integrity="sha256-vUNWgJI76VFo6huDn/atjngcyvQ9SOAPrcsf93HOPJA=" rel="preload stylesheet" as=style><link rel=icon href=https://team-json-delivery.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://team-json-delivery.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://team-json-delivery.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://team-json-delivery.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://team-json-delivery.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://team-json-delivery.github.io/posts/nearby-service/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-Y39RPCVCBC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Y39RPCVCBC")}</script><meta property="og:title" content="내 근처에는 누가 살고 있을까? : 위치 기반 서비스 설계하기"><meta property="og:description" content="오늘은 스터디원 분들과 가상 면접 사례로 배우는 대규모 시스템 설계 기초 2권 의 주변친구 챕터를 스터디를 하며 나눈 내용을 바탕으로 포스팅을 해보려 해요.
면접에서 주변 친구 서비스를 설계해 보라고 하면 어떻게 할까요?
문제를 이해하고 설계 범위를 확정하자 면접 상황에서는 문제를 이해하고 기능의 스펙을 최소화 하는데 집중해야 합니다.
국내 서비스 수준이 아닌 글로벌 서비스 수준의 설계를 원하는지, 주변 친구의 범위가 어느 정도인지, 채팅과 같은 부가기능을 지원해야 되는지에 대해서도 논의해 보면 좋아요. 면접 상황에서는 가급적 핵심 기능에 집중하고 면접관과 이해도를 맞추도록 해요."><meta property="og:type" content="article"><meta property="og:url" content="https://team-json-delivery.github.io/posts/nearby-service/"><meta property="og:image" content="https://team-json-delivery.github.io/images/nearby-service/cover.jpeg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-02-18T06:27:22+09:00"><meta property="article:modified_time" content="2024-02-18T06:27:22+09:00"><meta property="og:site_name" content="Team JSON Delivery"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://team-json-delivery.github.io/images/nearby-service/cover.jpeg"><meta name=twitter:title content="내 근처에는 누가 살고 있을까? : 위치 기반 서비스 설계하기"><meta name=twitter:description content="오늘은 스터디원 분들과 가상 면접 사례로 배우는 대규모 시스템 설계 기초 2권 의 주변친구 챕터를 스터디를 하며 나눈 내용을 바탕으로 포스팅을 해보려 해요.
면접에서 주변 친구 서비스를 설계해 보라고 하면 어떻게 할까요?
문제를 이해하고 설계 범위를 확정하자 면접 상황에서는 문제를 이해하고 기능의 스펙을 최소화 하는데 집중해야 합니다.
국내 서비스 수준이 아닌 글로벌 서비스 수준의 설계를 원하는지, 주변 친구의 범위가 어느 정도인지, 채팅과 같은 부가기능을 지원해야 되는지에 대해서도 논의해 보면 좋아요. 면접 상황에서는 가급적 핵심 기능에 집중하고 면접관과 이해도를 맞추도록 해요."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://team-json-delivery.github.io/posts/"},{"@type":"ListItem","position":2,"name":"내 근처에는 누가 살고 있을까? : 위치 기반 서비스 설계하기","item":"https://team-json-delivery.github.io/posts/nearby-service/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"내 근처에는 누가 살고 있을까? : 위치 기반 서비스 설계하기","name":"내 근처에는 누가 살고 있을까? : 위치 기반 서비스 설계하기","description":"오늘은 스터디원 분들과 가상 면접 사례로 배우는 대규모 시스템 설계 기초 2권 의 주변친구 챕터를 스터디를 하며 나눈 내용을 바탕으로 포스팅을 해보려 해요.\n면접에서 주변 친구 서비스를 설계해 보라고 하면 어떻게 할까요?\n문제를 이해하고 설계 범위를 확정하자 면접 상황에서는 문제를 이해하고 기능의 스펙을 최소화 하는데 집중해야 합니다.\n국내 서비스 수준이 아닌 글로벌 서비스 수준의 설계를 원하는지, 주변 친구의 범위가 어느 정도인지, 채팅과 같은 부가기능을 지원해야 되는지에 대해서도 논의해 보면 좋아요. 면접 상황에서는 가급적 핵심 기능에 집중하고 면접관과 이해도를 맞추도록 해요.","keywords":[],"articleBody":"오늘은 스터디원 분들과 가상 면접 사례로 배우는 대규모 시스템 설계 기초 2권 의 주변친구 챕터를 스터디를 하며 나눈 내용을 바탕으로 포스팅을 해보려 해요.\n면접에서 주변 친구 서비스를 설계해 보라고 하면 어떻게 할까요?\n문제를 이해하고 설계 범위를 확정하자 면접 상황에서는 문제를 이해하고 기능의 스펙을 최소화 하는데 집중해야 합니다.\n국내 서비스 수준이 아닌 글로벌 서비스 수준의 설계를 원하는지, 주변 친구의 범위가 어느 정도인지, 채팅과 같은 부가기능을 지원해야 되는지에 대해서도 논의해 보면 좋아요. 면접 상황에서는 가급적 핵심 기능에 집중하고 면접관과 이해도를 맞추도록 해요.\n책에서 설명하는 면접관과 논의 예시는 다음과 같아요.\nQ : 주변 친구의 범위는 어느정도로 할까요? A : 5마일(mile) 입니다. Q : 사용자 사이에 강이 있을수 있는데 어떻게 하는게 좋을까요? A : 사용자 사이의 직선거리라고 가정하죠. Q : 사용자 수(DAU)는 어떻게 가정할까요? A : 10억명으로 가정하고 주변 친구 기능은 10%가 사용 하는것으로 가정하죠. Q : 이동이력은 보관할까요? A : 추후 머신러닝 데이터를 확보하기 위해 영구 보관이 필요해요. Q : 사용자가 10분이상 비활성화 상태면 주변 친구 목록에서 사라지게 할까요? A : 사라지게 합시다. Q : GDPR과 CCPA 같은 데이터 보호법을 고려할까요? A : 고려하지 않겠습니다. GDPR, 즉 일반 데이터 보호 규정(General Data Protection Regulation)은 유럽연합(EU)의 데이터 보호와 개인정보의 자유로운 이동을 규제하는 법률이에요. ISMS(Information Security Management System)가 정보 보안 관리 체계 전반에 초점을 맞춘다면, GDPR은 개인 데이터의 안전한 처리와 투명성을 강조하고 있어요.\n💡 한 스터디원에 따르면, 사용자는 자신의 개인 데이터에 대한 이력을 요청할 수 있고, 기업은 해당 데이터를 제공하는 기능을 구현하는데 많은 어려움이 있었다고 해요.\n기능 요구사항 사용자는 앱에서 주변 친구 확인 가능 해당 친구까지의 거리와 마지막으로 갱신된 시각 (timestamp) 표시 친구 목록은 N초마다 한번씩 갱신 되어야 함 비기능 요구사항 낮은 지연시간 (low latency) 안정성, 일부의 데이터 유실 용인 결과적 일관성 (eventually consistency) 개략적 규모 추정 총 사용자 10억명 중 DAU는 1억 명으로 가정 동시 사용 접속자 수는 1억명의 10%인 천만명으로 가정 사용자는 모두 30초마다 위치 갱신 1,000,000명/30초 = 334,000 QPS 개략적 설계안을 제시하자 개략적 설계안 먼저 백엔드의 역할을 정의하면 다음과 같아요.\n모든 활성 상태 사용자의 위치 변화 내역을 수신하기 사용자 위치 변경 내역을 수신할 때마다, 관련 친구들에게 변경 내역을 갱신하기 특정 임계치보다 너무 먼 경우 변경내역 전하지 않기 단 위와같이 천만명의 유저의 위치 내역을 수신하도록 구현하면 30초마다 천만명의 유저를 처리해야 하기에 자체 DDOS를 발생시킬 수 있어 주의가 필요해요.\n스터디원들끼리 서로 클라이언트로 인한 자체 DDOS 사례들을 공유했어요. 클라이언트가 API를 여러번 호출하는 버그, N시간 마다 동작하는 클라이언트의 배치로 인한 장애 경험 등을 공유해 주셨답니다! 😅\n웹소켓 서버 친구 위치 정보 변경을 거의 실시간에 가깝게 처리하는 유상태 서버 클러스터에요. 검색 반경 내 친구 위치가 변경되면, 웹소켓을 통해 클라이언트로 전송되어요. 앱을 킬때, 온라인 상태인 모든 주변 친구 위치가 웹소켓으로 해당 앱에 전송되어요. 레디스 위치 정보 캐시 활성 상태인 사용자의 가장 최근 위치 정보를 캐시하는데 사용되어요. 레디스의 TTL 기능을 이용해 활성 상태 만료를 관리하고, 캐시 정보가 갱신될때 TTL이 갱신되면서 활성상태를 연장시키도록 구현해요. 위치 정보를 DB가 아닌 레디스에 저장하는 이유는, 주변친구 기능은 사용자의 “현재위치”만 친구들이 알수 있으면 되기 때문이에요. 즉 위치 정보에 대해 영속성을 보장할 필요 없기 때문에 휘발될 수 있지만 성능이 좋은 레디스를 활용하는게 좋아요. 사용자 데이터베이스 사용자 데이터와 친구 관계 정보를 저장해요. 복잡한 SNS 친구관계를 만든다면 GraphDB를 이용해야 할 수 있지만, 사용자 데이터 및 친구 관계는 1:N이라 가정하면 RDB와 NoSQL 어느쪽이든 사용 가능해요. RDB를 사용하기로 했다면, 한대의 DB로 감당할 수 없을 수 있기 때문에, 사용자 ID를 기준으로 데이터를 샤딩하는것을 고려 해야 해요. 위치 이동 이력 데이터베이스 사용자의 위치 변동 이력을 보관해요. 해당 이력은 기능구현과 관련은 없지만, 추후 머신러닝 학습에 이용 될 수 있어요. 위치 이력 DB는 카산드라를 채택해요. 막대한 쓰기 연산 부하를 감당할 수 있고, 수평적 규모 확장이 가능해요. RDB는 쓰기보단 읽기 위주 서비스에 적합하고, 대량의 데이터엔 샤딩 전략이 고려되어야 해요. 카산드라의 수평적 규모 확장은 무한할까? 🤔 한 스터디원의 경험에 따르면, AWS에 카산드라 N백대 클러스터가 있는상태로 수평적 규모 확장으로 버티던 서비스가 더이상 늘리기 어려운 시점이 오게되어 카산드라를 RDB 처럼 샤딩했던 경험이 있었고, 최종적 일관성 으로 동작하기 때문에 주의가 필요하다고 해요.\n레디스 펍/섭 서버 웹소켓 서버를 통해 수신한 위치 정보 이벤트를 펍/섭 채널에 발행해요. 수신한 위치 정보를 사용자의 채널에 펍(발행) 하면 사용자의 친구들이 섭(구독) 하는 형태에요. 조금 더 설계해보자 무상태 서버 VS 유상태 서버 API 서버는 무상태 특성이 있기 때문에 CPU 사용률 또는 I/O 상태에 따라 오토 스케일링 할 수 있지만, 웹소켓 서버는 노드를 제거하기 전에 기존에 연결된 클라이언트들이 있어 유상태 특성이 있어요.\n웹소켓 서버는 교체할때 로드밸런서에 연결 종료중 상태를 전달하고 새로운 커넥션은 맺지 않고, 모든 커넥션이 종료되면 노드에서 제거하는 전략을 고려해야해요.\n레디스 펍/섭 서버 레디스 펍/섭 서버를 위치 변경 내역 메시지를 라우팅 하는 계층으로 활용했어요. 레디스 펍/섭 채널 비용이 아주 저렴하기 때문이에요. 구독자가 없는 채널로 전송된 메시지는 버려지는 특성이 있어 부담이 적어요. 구독자 관계를 추적하기 위한 자료 구조로 소량의 메모리만 사용하는 해시 테이블 또는 연결 리스트를 사용해요. 얼마나 많은 레디스 펍/섭 서버가 필요할까? 메모리 사용량 채널의 수는 1억개 (10억 사용자의 10%) 해시 테이블과 연결 리스트는 20바이트로 가정한다면, 1억*20바이트=200GB 메모리 100GB의 메모리가 탑재된 서버라면 2대가 필요해요. CPU 사용량 위치 정보 업데이트 양은 초당 1400만건 서버 한대로 감당 가능한 수는 십만건이라고 가정 한다면, 140대의 서버가 필요해요. 본 설계안의 결론은 병목은 메모리가 아닌 CPU 사용량으로 보이기에 분산 레디스 펍/섭 클러스터 도입이 필요하다는 점을 알 수 있어요.\n이론적 계산으로 서버 대수를 선정하는게 가능할까? 🤔 개인적인 경험으로는, 목표 TPS를 산정하고 해당 TPS를 견딜수 있는지 nGrinder 같은 성능테스트 툴로 반복적으로 성능테스트 시도와 실패 결과를 통해 최종 서버의 스펙을 산정하는 경우가 많았어요.\n대다수의 스터디원들도 이에 공감했지만, 카프카 클러스터의 스펙을 선정할때 제로 카피(Zero-Copy) 의 특성 덕분에 책과 같이 계산만으로 스펙을 선정한 경험을 공유 주셨어요.\n성능테스트 기반으로 서버 스펙을 산정하는 방식은 신규 서비스 배포 전에 실험과 개선을 반복한 이야기 포스팅을 추천해요.\n분산 레디스 펍/섭 서버 클러스터 서버에는 필연적으로 장애가 생기기 마련이에요. etcd나 주키퍼 같은 서비스 탐색 컴포넌트 도입으로 문제를 해결 할 수 있어요. 예를들어 [p_1, p_2, p_3, p_4] 와 같이 가용한 서버 목록을 유지하는 해시링 키-값 저장소를 구현해야 해요. 레디스 펍/섭 클러스터의 확장성 데이터는 채널의 모든 구독자에게 전송되고 나면 바로 삭제되기에 무상태 특성이 있지만, 펍/섭 서버는 채널에 대한 상태 정보 보관를 보관하기에 유상태 특성이 있어요. 펍/섭 서버를 교체하거나 제거하는 경우 채널은 다른 서버로 이동시켜야 하고, 해당 채널의 모든 구독자에게 알려야해요. 이러한 유상태 서버 클러스터는 늘리고 줄이는데 부담되기에 오버 프로비지닝 해 두는것이 좋아요. 펍/섭 구조가 항상 옳은걸까? 🤔 상품 DB 엑셀 업로드를 레디스 펍/섭을 통해 구현한 경험이 있었어요.\n데이터가 하나의 엑셀 파일을 공유 해야하는 유상태라는 특성이 있어 후처리 서버 확장을 하는데 제약이 있었던 경험이 있어 펍/섭 구조가 유상태일땐 여러 고민이 필요하다 느꼈죠.\n마무리 이렇게 책에서 배운 ‘주변친구’ 기능의 설계 방법과 스터디원들의 실제 경험을 결합해보니, 대규모 시스템 설계의 복잡함을 더 잘 이해할 수 있었어요. 또한 핵심 컴포넌트 3가지를 사용할 수 있다는 점을 배우게 되었답니다.\n웹소켓 : 클라이언트와 서버 사이의 실시간 통신을 위해 사용 레디스는 위치 데이터의 빠른 읽기/쓰기를 위해 사용 레디스 펍/섭 : 메시지 라우팅 계층으로써 모든 온라인 친구에게 위치변경 내역을 전달하는데 사용 여러분도 대규모 시스템 설계에 대한 이해를 넓히는 데 이 글이 도움이 되었으면 해요.\n다음 포스팅에서 더 재미있는 내용으로 찾아뵐게요!\n","wordCount":"1084","inLanguage":"en","image":"https://team-json-delivery.github.io/images/nearby-service/cover.jpeg","datePublished":"2024-02-18T06:27:22+09:00","dateModified":"2024-02-18T06:27:22+09:00","author":{"@type":"Person","name":"njhyuk"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://team-json-delivery.github.io/posts/nearby-service/"},"publisher":{"@type":"Organization","name":"Team JSON Delivery","logo":{"@type":"ImageObject","url":"https://team-json-delivery.github.io/%3Clink%20/%20abs%20url%3E"}}}</script><script>function changeGiscusTheme(){const e=document.body.classList.contains("dark")?"dark":"light";function t(e){const t=document.querySelector("iframe.giscus-frame");if(!t)return;t.contentWindow.postMessage({giscus:e},"https://giscus.app")}t({setConfig:{theme:e}})}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?(document.body.classList.add("dark"),setTimeout(changeGiscusTheme,2e3)):localStorage.getItem("pref-theme")==="light"?(document.body.classList.remove("dark"),setTimeout(changeGiscusTheme,2e3)):window.matchMedia("(prefers-color-scheme: dark)").matches&&(document.body.classList.add("dark"),setTimeout(changeGiscusTheme,2e3))</script><header class=header><nav class=nav><div class=logo><a href=https://team-json-delivery.github.io/ accesskey=h title="Team JSON Delivery (Alt + H)"><img src=https://team-json-delivery.github.io/apple-touch-icon.png alt aria-label=logo height=35>Team JSON Delivery</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://team-json-delivery.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://team-json-delivery.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://team-json-delivery.github.io/author/ title=author><span>author</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://team-json-delivery.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://team-json-delivery.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent" style=word-break:keep-all>내 근처에는 누가 살고 있을까? : 위치 기반 서비스 설계하기</h1><div class=post-meta><span title='2024-02-18 06:27:22 +0900 +0900'>2024년 02월 18일</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1084 words&nbsp;·&nbsp;njhyuk&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/nearby-service.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><div id=figmask style=z-index:-1><img loading=eager src=https://team-json-delivery.github.io/images/nearby-service/cover.jpeg alt></div></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#문제를-이해하고-설계-범위를-확정하자>문제를 이해하고 설계 범위를 확정하자</a><ul><li><a href=#기능-요구사항>기능 요구사항</a></li><li><a href=#비기능-요구사항>비기능 요구사항</a></li><li><a href=#개략적-규모-추정>개략적 규모 추정</a></li></ul></li><li><a href=#개략적-설계안을-제시하자>개략적 설계안을 제시하자</a><ul><li><a href=#개략적-설계안>개략적 설계안</a></li></ul></li><li><a href=#조금-더-설계해보자>조금 더 설계해보자</a><ul><li><a href=#무상태-서버-vs-유상태-서버>무상태 서버 VS 유상태 서버</a></li><li><a href=#레디스-펍섭-서버-1>레디스 펍/섭 서버</a></li><li><a href=#얼마나-많은-레디스-펍섭-서버가-필요할까>얼마나 많은 레디스 펍/섭 서버가 필요할까?</a></li><li><a href=#분산-레디스-펍섭-서버-클러스터>분산 레디스 펍/섭 서버 클러스터</a></li></ul></li><li><a href=#마무리>마무리</a></li></ul></nav></div></details></div><div class=post-content><p>오늘은 스터디원 분들과 <code>가상 면접 사례로 배우는 대규모 시스템 설계 기초 2권</code> 의 주변친구 챕터를 스터디를 하며 나눈 내용을 바탕으로 포스팅을 해보려 해요.</p><p>면접에서 주변 친구 서비스를 설계해 보라고 하면 어떻게 할까요?</p><h2 id=문제를-이해하고-설계-범위를-확정하자>문제를 이해하고 설계 범위를 확정하자<a hidden class=anchor aria-hidden=true href=#문제를-이해하고-설계-범위를-확정하자>#</a></h2><p>면접 상황에서는 문제를 이해하고 기능의 스펙을 최소화 하는데 집중해야 합니다.</p><p>국내 서비스 수준이 아닌 글로벌 서비스 수준의 설계를 원하는지, 주변 친구의 범위가 어느 정도인지, 채팅과 같은 부가기능을 지원해야 되는지에 대해서도 논의해 보면 좋아요. 면접 상황에서는 가급적 핵심 기능에 집중하고 면접관과 이해도를 맞추도록 해요.</p><p>책에서 설명하는 면접관과 논의 예시는 다음과 같아요.</p><ul><li>Q : 주변 친구의 범위는 어느정도로 할까요?</li><li>A : 5마일(mile) 입니다.</li><li>Q : 사용자 사이에 강이 있을수 있는데 어떻게 하는게 좋을까요?</li><li>A : 사용자 사이의 직선거리라고 가정하죠.</li><li>Q : 사용자 수(DAU)는 어떻게 가정할까요?</li><li>A : 10억명으로 가정하고 주변 친구 기능은 10%가 사용 하는것으로 가정하죠.</li><li>Q : 이동이력은 보관할까요?</li><li>A : 추후 머신러닝 데이터를 확보하기 위해 영구 보관이 필요해요.</li><li>Q : 사용자가 10분이상 비활성화 상태면 주변 친구 목록에서 사라지게 할까요?</li><li>A : 사라지게 합시다.</li><li>Q : GDPR과 CCPA 같은 데이터 보호법을 고려할까요?</li><li>A : 고려하지 않겠습니다.</li></ul><p>GDPR, 즉 일반 데이터 보호 규정(General Data Protection Regulation)은 유럽연합(EU)의 데이터 보호와 개인정보의 자유로운 이동을 규제하는 법률이에요.
ISMS(Information Security Management System)가 정보 보안 관리 체계 전반에 초점을 맞춘다면, GDPR은 개인 데이터의 안전한 처리와 투명성을 강조하고 있어요.</p><p>💡 한 스터디원에 따르면, 사용자는 자신의 개인 데이터에 대한 이력을 요청할 수 있고, 기업은 해당 데이터를 제공하는 기능을 구현하는데 많은 어려움이 있었다고 해요.</p><h3 id=기능-요구사항>기능 요구사항<a hidden class=anchor aria-hidden=true href=#기능-요구사항>#</a></h3><ul><li>사용자는 앱에서 주변 친구 확인 가능</li><li>해당 친구까지의 거리와 마지막으로 갱신된 시각 (timestamp) 표시</li><li>친구 목록은 N초마다 한번씩 갱신 되어야 함</li></ul><h3 id=비기능-요구사항>비기능 요구사항<a hidden class=anchor aria-hidden=true href=#비기능-요구사항>#</a></h3><ul><li>낮은 지연시간 (low latency)</li><li>안정성, 일부의 데이터 유실 용인</li><li>결과적 일관성 (eventually consistency)</li></ul><h3 id=개략적-규모-추정>개략적 규모 추정<a hidden class=anchor aria-hidden=true href=#개략적-규모-추정>#</a></h3><ul><li>총 사용자 10억명 중 DAU는 1억 명으로 가정</li><li>동시 사용 접속자 수는 1억명의 10%인 천만명으로 가정</li><li>사용자는 모두 30초마다 위치 갱신</li><li>1,000,000명/30초 = 334,000 QPS</li></ul><h2 id=개략적-설계안을-제시하자>개략적 설계안을 제시하자<a hidden class=anchor aria-hidden=true href=#개략적-설계안을-제시하자>#</a></h2><h3 id=개략적-설계안>개략적 설계안<a hidden class=anchor aria-hidden=true href=#개략적-설계안>#</a></h3><p>먼저 백엔드의 역할을 정의하면 다음과 같아요.</p><ul><li>모든 활성 상태 사용자의 위치 변화 내역을 수신하기</li><li>사용자 위치 변경 내역을 수신할 때마다, 관련 친구들에게 변경 내역을 갱신하기</li><li>특정 임계치보다 너무 먼 경우 변경내역 전하지 않기</li></ul><p>단 위와같이 천만명의 유저의 위치 내역을 수신하도록 구현하면 30초마다 천만명의 유저를 처리해야 하기에 자체 DDOS를 발생시킬 수 있어 주의가 필요해요.</p><p>스터디원들끼리 서로 클라이언트로 인한 자체 DDOS 사례들을 공유했어요.
클라이언트가 API를 여러번 호출하는 버그, N시간 마다 동작하는 클라이언트의 배치로 인한 장애 경험 등을 공유해 주셨답니다! 😅</p><p><img loading=lazy src="https://github.com/team-json-delivery/study-archive/blob/main/System-Design-Interview-vol2/02.%EC%A3%BC%EB%B3%80%20%EC%B9%9C%EA%B5%AC/devhwang/archi.png?raw=true" alt></p><h4 id=웹소켓-서버>웹소켓 서버<a hidden class=anchor aria-hidden=true href=#웹소켓-서버>#</a></h4><ul><li>친구 위치 정보 변경을 거의 실시간에 가깝게 처리하는 유상태 서버 클러스터에요.</li><li>검색 반경 내 친구 위치가 변경되면, 웹소켓을 통해 클라이언트로 전송되어요.</li><li>앱을 킬때, 온라인 상태인 모든 주변 친구 위치가 웹소켓으로 해당 앱에 전송되어요.</li></ul><h4 id=레디스-위치-정보-캐시>레디스 위치 정보 캐시<a hidden class=anchor aria-hidden=true href=#레디스-위치-정보-캐시>#</a></h4><ul><li>활성 상태인 사용자의 가장 최근 위치 정보를 캐시하는데 사용되어요.</li><li>레디스의 TTL 기능을 이용해 활성 상태 만료를 관리하고, 캐시 정보가 갱신될때 TTL이 갱신되면서 활성상태를 연장시키도록 구현해요.</li><li>위치 정보를 DB가 아닌 레디스에 저장하는 이유는, 주변친구 기능은 사용자의 “현재위치”만 친구들이 알수 있으면 되기 때문이에요.<ul><li>즉 위치 정보에 대해 영속성을 보장할 필요 없기 때문에 휘발될 수 있지만 성능이 좋은 레디스를 활용하는게 좋아요.</li></ul></li></ul><h4 id=사용자-데이터베이스>사용자 데이터베이스<a hidden class=anchor aria-hidden=true href=#사용자-데이터베이스>#</a></h4><ul><li>사용자 데이터와 친구 관계 정보를 저장해요.</li><li>복잡한 SNS 친구관계를 만든다면 GraphDB를 이용해야 할 수 있지만, 사용자 데이터 및 친구 관계는 1:N이라 가정하면 RDB와 NoSQL 어느쪽이든 사용 가능해요.</li><li>RDB를 사용하기로 했다면, 한대의 DB로 감당할 수 없을 수 있기 때문에, 사용자 ID를 기준으로 데이터를 샤딩하는것을 고려 해야 해요.</li></ul><h4 id=위치-이동-이력-데이터베이스>위치 이동 이력 데이터베이스<a hidden class=anchor aria-hidden=true href=#위치-이동-이력-데이터베이스>#</a></h4><ul><li>사용자의 위치 변동 이력을 보관해요.</li><li>해당 이력은 기능구현과 관련은 없지만, 추후 머신러닝 학습에 이용 될 수 있어요.</li><li>위치 이력 DB는 카산드라를 채택해요.<ul><li>막대한 쓰기 연산 부하를 감당할 수 있고, 수평적 규모 확장이 가능해요.</li><li>RDB는 쓰기보단 읽기 위주 서비스에 적합하고, 대량의 데이터엔 샤딩 전략이 고려되어야 해요.</li></ul></li></ul><h4 id=카산드라의-수평적-규모-확장은-무한할까->카산드라의 수평적 규모 확장은 무한할까? 🤔<a hidden class=anchor aria-hidden=true href=#카산드라의-수평적-규모-확장은-무한할까->#</a></h4><p>한 스터디원의 경험에 따르면, AWS에 카산드라 N백대 클러스터가 있는상태로 수평적 규모 확장으로 버티던 서비스가 더이상 늘리기 어려운 시점이 오게되어 카산드라를 RDB 처럼 샤딩했던 경험이 있었고, <a href=https://www.popit.kr/%EA%B2%B0%EA%B3%BC%EC%A0%81-%EC%9D%BC%EA%B4%80%EC%84%B1%EC%9D%B8%EA%B0%80-%EC%B5%9C%EC%A2%85%EC%A0%81-%EC%9D%BC%EA%B4%80%EC%84%B1%EC%9D%B8%EA%B0%80/>최종적 일관성</a> 으로 동작하기 때문에 주의가 필요하다고 해요.</p><h4 id=레디스-펍섭-서버>레디스 펍/섭 서버<a hidden class=anchor aria-hidden=true href=#레디스-펍섭-서버>#</a></h4><ul><li>웹소켓 서버를 통해 수신한 위치 정보 이벤트를 펍/섭 채널에 발행해요.</li><li>수신한 위치 정보를 사용자의 채널에 펍(발행) 하면 사용자의 친구들이 섭(구독) 하는 형태에요.</li></ul><h2 id=조금-더-설계해보자>조금 더 설계해보자<a hidden class=anchor aria-hidden=true href=#조금-더-설계해보자>#</a></h2><h3 id=무상태-서버-vs-유상태-서버>무상태 서버 VS 유상태 서버<a hidden class=anchor aria-hidden=true href=#무상태-서버-vs-유상태-서버>#</a></h3><p>API 서버는 무상태 특성이 있기 때문에 CPU 사용률 또는 I/O 상태에 따라 오토 스케일링 할 수 있지만, 웹소켓 서버는 노드를 제거하기 전에 기존에 연결된 클라이언트들이 있어 유상태 특성이 있어요.</p><p>웹소켓 서버는 교체할때 로드밸런서에 연결 종료중 상태를 전달하고 새로운 커넥션은 맺지 않고, 모든 커넥션이 종료되면 노드에서 제거하는 전략을 고려해야해요.</p><h3 id=레디스-펍섭-서버-1>레디스 펍/섭 서버<a hidden class=anchor aria-hidden=true href=#레디스-펍섭-서버-1>#</a></h3><ul><li>레디스 펍/섭 서버를 위치 변경 내역 메시지를 라우팅 하는 계층으로 활용했어요.</li><li>레디스 펍/섭 채널 비용이 아주 저렴하기 때문이에요.</li><li>구독자가 없는 채널로 전송된 메시지는 버려지는 특성이 있어 부담이 적어요.</li><li>구독자 관계를 추적하기 위한 자료 구조로 소량의 메모리만 사용하는 해시 테이블 또는 연결 리스트를 사용해요.</li></ul><h3 id=얼마나-많은-레디스-펍섭-서버가-필요할까>얼마나 많은 레디스 펍/섭 서버가 필요할까?<a hidden class=anchor aria-hidden=true href=#얼마나-많은-레디스-펍섭-서버가-필요할까>#</a></h3><h4 id=메모리-사용량>메모리 사용량<a hidden class=anchor aria-hidden=true href=#메모리-사용량>#</a></h4><ul><li>채널의 수는 1억개 (10억 사용자의 10%)</li><li>해시 테이블과 연결 리스트는 20바이트로 가정한다면, 1억*20바이트=200GB 메모리</li><li>100GB의 메모리가 탑재된 서버라면 2대가 필요해요.</li></ul><h4 id=cpu-사용량>CPU 사용량<a hidden class=anchor aria-hidden=true href=#cpu-사용량>#</a></h4><ul><li>위치 정보 업데이트 양은 초당 1400만건</li><li>서버 한대로 감당 가능한 수는 십만건이라고 가정 한다면, 140대의 서버가 필요해요.</li></ul><p>본 설계안의 결론은 병목은 메모리가 아닌 CPU 사용량으로 보이기에 분산 레디스 펍/섭 클러스터 도입이 필요하다는 점을 알 수 있어요.</p><h4 id=이론적-계산으로-서버-대수를-선정하는게-가능할까->이론적 계산으로 서버 대수를 선정하는게 가능할까? 🤔<a hidden class=anchor aria-hidden=true href=#이론적-계산으로-서버-대수를-선정하는게-가능할까->#</a></h4><p>개인적인 경험으로는, 목표 TPS를 산정하고 해당 TPS를 견딜수 있는지 nGrinder 같은 성능테스트 툴로 반복적으로 성능테스트 시도와 실패 결과를 통해 최종 서버의 스펙을 산정하는 경우가 많았어요.</p><p>대다수의 스터디원들도 이에 공감했지만, 카프카 클러스터의 스펙을 선정할때 <a href=https://soft.plusblog.co.kr/7>제로 카피(Zero-Copy)</a> 의 특성 덕분에 책과 같이 계산만으로 스펙을 선정한 경험을 공유 주셨어요.</p><p>성능테스트 기반으로 서버 스펙을 산정하는 방식은 <a href=https://helloworld.kurly.com/blog/vsms-performance-experiment/>신규 서비스 배포 전에 실험과 개선을 반복한 이야기</a> 포스팅을 추천해요.</p><h3 id=분산-레디스-펍섭-서버-클러스터>분산 레디스 펍/섭 서버 클러스터<a hidden class=anchor aria-hidden=true href=#분산-레디스-펍섭-서버-클러스터>#</a></h3><ul><li>서버에는 필연적으로 장애가 생기기 마련이에요.</li><li>etcd나 주키퍼 같은 서비스 탐색 컴포넌트 도입으로 문제를 해결 할 수 있어요.</li><li>예를들어 [p_1, p_2, p_3, p_4] 와 같이 가용한 서버 목록을 유지하는 해시링 키-값 저장소를 구현해야 해요.</li></ul><h4 id=레디스-펍섭-클러스터의-확장성>레디스 펍/섭 클러스터의 확장성<a hidden class=anchor aria-hidden=true href=#레디스-펍섭-클러스터의-확장성>#</a></h4><ul><li>데이터는 채널의 모든 구독자에게 전송되고 나면 바로 삭제되기에 무상태 특성이 있지만, 펍/섭 서버는 채널에 대한 상태 정보 보관를 보관하기에 유상태 특성이 있어요.</li><li>펍/섭 서버를 교체하거나 제거하는 경우 채널은 다른 서버로 이동시켜야 하고, 해당 채널의 모든 구독자에게 알려야해요.</li><li>이러한 유상태 서버 클러스터는 늘리고 줄이는데 부담되기에 오버 프로비지닝 해 두는것이 좋아요.</li></ul><h4 id=펍섭-구조가-항상-옳은걸까-->펍/섭 구조가 항상 옳은걸까? 🤔<a hidden class=anchor aria-hidden=true href=#펍섭-구조가-항상-옳은걸까-->#</a></h4><p>상품 DB 엑셀 업로드를 레디스 펍/섭을 통해 구현한 경험이 있었어요.</p><p>데이터가 하나의 엑셀 파일을 공유 해야하는 유상태라는 특성이 있어 후처리 서버 확장을 하는데 제약이 있었던 경험이 있어 펍/섭 구조가 유상태일땐 여러 고민이 필요하다 느꼈죠.</p><h2 id=마무리>마무리<a hidden class=anchor aria-hidden=true href=#마무리>#</a></h2><p>이렇게 책에서 배운 &lsquo;주변친구&rsquo; 기능의 설계 방법과 스터디원들의 실제 경험을 결합해보니, 대규모 시스템 설계의 복잡함을 더 잘 이해할 수 있었어요. 또한 핵심 컴포넌트 3가지를 사용할 수 있다는 점을 배우게 되었답니다.</p><ul><li><strong>웹소켓</strong> : 클라이언트와 서버 사이의 실시간 통신을 위해 사용</li><li><strong>레디스</strong>는 위치 데이터의 빠른 읽기/쓰기를 위해 사용</li><li><strong>레디스 펍/섭</strong> : 메시지 라우팅 계층으로써 모든 온라인 친구에게 위치변경 내역을 전달하는데 사용</li></ul><p>여러분도 대규모 시스템 설계에 대한 이해를 넓히는 데 이 글이 도움이 되었으면 해요.</p><p>다음 포스팅에서 더 재미있는 내용으로 찾아뵐게요!</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://team-json-delivery.github.io/posts/%EB%B6%84%EC%82%B0-%EB%A9%94%EC%8B%9C%EC%A7%80-%ED%81%90/><span class=title>« Prev</span><br><span>쓰지만 말고 직접 구현해보자! 분산 메시지큐!</span>
</a><a class=next href=https://team-json-delivery.github.io/posts/system-design-interview-proximity-service/><span class=title>Next »</span><br><span>주변 맛집을 찾으려면 어떻게 해야 검색이 빠를까?</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 내 근처에는 누가 살고 있을까? : 위치 기반 서비스 설계하기 on x" href="https://x.com/intent/tweet/?text=%eb%82%b4%20%ea%b7%bc%ec%b2%98%ec%97%90%eb%8a%94%20%eb%88%84%ea%b0%80%20%ec%82%b4%ea%b3%a0%20%ec%9e%88%ec%9d%84%ea%b9%8c%3f%20%3a%20%ec%9c%84%ec%b9%98%20%ea%b8%b0%eb%b0%98%20%ec%84%9c%eb%b9%84%ec%8a%a4%20%ec%84%a4%ea%b3%84%ed%95%98%ea%b8%b0&amp;url=https%3a%2f%2fteam-json-delivery.github.io%2fposts%2fnearby-service%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 내 근처에는 누가 살고 있을까? : 위치 기반 서비스 설계하기 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fteam-json-delivery.github.io%2fposts%2fnearby-service%2f&amp;title=%eb%82%b4%20%ea%b7%bc%ec%b2%98%ec%97%90%eb%8a%94%20%eb%88%84%ea%b0%80%20%ec%82%b4%ea%b3%a0%20%ec%9e%88%ec%9d%84%ea%b9%8c%3f%20%3a%20%ec%9c%84%ec%b9%98%20%ea%b8%b0%eb%b0%98%20%ec%84%9c%eb%b9%84%ec%8a%a4%20%ec%84%a4%ea%b3%84%ed%95%98%ea%b8%b0&amp;summary=%eb%82%b4%20%ea%b7%bc%ec%b2%98%ec%97%90%eb%8a%94%20%eb%88%84%ea%b0%80%20%ec%82%b4%ea%b3%a0%20%ec%9e%88%ec%9d%84%ea%b9%8c%3f%20%3a%20%ec%9c%84%ec%b9%98%20%ea%b8%b0%eb%b0%98%20%ec%84%9c%eb%b9%84%ec%8a%a4%20%ec%84%a4%ea%b3%84%ed%95%98%ea%b8%b0&amp;source=https%3a%2f%2fteam-json-delivery.github.io%2fposts%2fnearby-service%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 내 근처에는 누가 살고 있을까? : 위치 기반 서비스 설계하기 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fteam-json-delivery.github.io%2fposts%2fnearby-service%2f&title=%eb%82%b4%20%ea%b7%bc%ec%b2%98%ec%97%90%eb%8a%94%20%eb%88%84%ea%b0%80%20%ec%82%b4%ea%b3%a0%20%ec%9e%88%ec%9d%84%ea%b9%8c%3f%20%3a%20%ec%9c%84%ec%b9%98%20%ea%b8%b0%eb%b0%98%20%ec%84%9c%eb%b9%84%ec%8a%a4%20%ec%84%a4%ea%b3%84%ed%95%98%ea%b8%b0"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 내 근처에는 누가 살고 있을까? : 위치 기반 서비스 설계하기 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fteam-json-delivery.github.io%2fposts%2fnearby-service%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 내 근처에는 누가 살고 있을까? : 위치 기반 서비스 설계하기 on whatsapp" href="https://api.whatsapp.com/send?text=%eb%82%b4%20%ea%b7%bc%ec%b2%98%ec%97%90%eb%8a%94%20%eb%88%84%ea%b0%80%20%ec%82%b4%ea%b3%a0%20%ec%9e%88%ec%9d%84%ea%b9%8c%3f%20%3a%20%ec%9c%84%ec%b9%98%20%ea%b8%b0%eb%b0%98%20%ec%84%9c%eb%b9%84%ec%8a%a4%20%ec%84%a4%ea%b3%84%ed%95%98%ea%b8%b0%20-%20https%3a%2f%2fteam-json-delivery.github.io%2fposts%2fnearby-service%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 내 근처에는 누가 살고 있을까? : 위치 기반 서비스 설계하기 on telegram" href="https://telegram.me/share/url?text=%eb%82%b4%20%ea%b7%bc%ec%b2%98%ec%97%90%eb%8a%94%20%eb%88%84%ea%b0%80%20%ec%82%b4%ea%b3%a0%20%ec%9e%88%ec%9d%84%ea%b9%8c%3f%20%3a%20%ec%9c%84%ec%b9%98%20%ea%b8%b0%eb%b0%98%20%ec%84%9c%eb%b9%84%ec%8a%a4%20%ec%84%a4%ea%b3%84%ed%95%98%ea%b8%b0&amp;url=https%3a%2f%2fteam-json-delivery.github.io%2fposts%2fnearby-service%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 내 근처에는 누가 살고 있을까? : 위치 기반 서비스 설계하기 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%eb%82%b4%20%ea%b7%bc%ec%b2%98%ec%97%90%eb%8a%94%20%eb%88%84%ea%b0%80%20%ec%82%b4%ea%b3%a0%20%ec%9e%88%ec%9d%84%ea%b9%8c%3f%20%3a%20%ec%9c%84%ec%b9%98%20%ea%b8%b0%eb%b0%98%20%ec%84%9c%eb%b9%84%ec%8a%a4%20%ec%84%a4%ea%b3%84%ed%95%98%ea%b8%b0&u=https%3a%2f%2fteam-json-delivery.github.io%2fposts%2fnearby-service%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://giscus.app/client.js data-repo=team-json-delivery/team-json-delivery.github.io data-repo-id=R_kgDOLAMZNQ data-category=comment data-category-id=DIC_kwDOLAMZNc4CcJ4o data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=ko crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://team-json-delivery.github.io/>Team JSON Delivery</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light"),changeGiscusTheme()):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"),changeGiscusTheme())})</script></body></html>